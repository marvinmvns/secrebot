{
  "id": "vendas-leads-template",
  "name": "Gera√ß√£o de Leads e Vendas",
  "description": "Template para qualifica√ß√£o de leads e processo de vendas com follow-up automatizado",
  "alias": "vendas",
  "version": "1.0.0",
  "metadata": {
    "category": "vendas",
    "isTemplate": true,
    "tags": ["vendas", "leads", "qualificacao", "crm", "follow-up"],
    "author": "SecreBot Templates",
    "businessType": "sales"
  },
  "nodes": [
    {
      "id": "start-1",
      "type": "start",
      "position": { "x": 100, "y": 100 },
      "data": {
        "label": "In√≠cio Vendas",
        "message": "Processo de vendas iniciado"
      }
    },
    {
      "id": "welcome_sales",
      "type": "message",
      "position": { "x": 300, "y": 100 },
      "data": {
        "label": "Boas-vindas Vendas",
        "message": "üéØ *Ol√°! Que bom ter voc√™ aqui!*\n\nSou o assistente de vendas e vou te ajudar a encontrar a melhor solu√ß√£o para suas necessidades.\n\n‚ú® *O que podemos fazer por voc√™ hoje?*\n\nüîç Conhecer nossos produtos\nüí∞ Solicitar or√ßamento personalizado\nüìû Agendar demonstra√ß√£o\nüéÅ Ver promo√ß√µes especiais\n\n*Digite sua escolha ou me conte o que precisa!*",
        "isMainMenu": true
      }
    },
    {
      "id": "qualify_lead",
      "type": "llm",
      "position": { "x": 500, "y": 100 },
      "data": {
        "label": "Qualificar Lead",
        "prompt": "Voc√™ √© um especialista em qualifica√ß√£o de leads. Analise a mensagem do prospecto e determine:\n\n1. INTERESSE: Alto, M√©dio, Baixo\n2. URG√äNCIA: Imediata, Pr√≥ximos 30 dias, Futuro\n3. OR√áAMENTO: Indicado, N√£o mencionado, Limitado\n4. AUTORIDADE: Decisor, Influenciador, Usu√°rio\n5. PRODUTO_INTERESSE: Espec√≠fico ou Geral\n\nMensagem: {{user_message}}\n\nFormat sua resposta:\nINTERESSE: [Alto/M√©dio/Baixo]\nURG√äNCIA: [Imediata/30dias/Futuro]\nOR√áAMENTO: [Indicado/N√£oMencionado/Limitado]\nAUTORIDADE: [Decisor/Influenciador/Usu√°rio]\nPRODUTO: [espec√≠fico/geral]\nRESUMO: [frase sobre o interesse do lead]",
        "timeout": 20000,
        "useBalancer": true
      }
    },
    {
      "id": "check_lead_quality",
      "type": "condition",
      "position": { "x": 700, "y": 100 },
      "data": {
        "label": "Verificar Qualidade do Lead",
        "condition": "llm_output.includes('INTERESSE: Alto') || llm_output.includes('URG√äNCIA: Imediata')",
        "description": "Lead qualificado com alto interesse ou urg√™ncia"
      }
    },
    {
      "id": "high_priority_response",
      "type": "llm",
      "position": { "x": 900, "y": 50 },
      "data": {
        "label": "Resposta Priorit√°ria",
        "prompt": "Este √© um lead de alta prioridade! Crie uma resposta personalizada e envolvente que:\n\n1. Reconhe√ßa o interesse/urg√™ncia\n2. Apresente valor imediato\n3. Fa√ßa perguntas qualificadoras\n4. Ofere√ßa pr√≥ximo passo concreto\n\nContexto do lead: {{user_message}}\nQualifica√ß√£o: {{qualification_result}}\n\nTom: Profissional, entusiasmado, focado em resultados.\nIncluir: Benef√≠cios espec√≠ficos, prova social, call-to-action.",
        "timeout": 20000,
        "useBalancer": true
      }
    },
    {
      "id": "standard_response",
      "type": "llm",
      "position": { "x": 900, "y": 200 },
      "data": {
        "label": "Resposta Padr√£o",
        "prompt": "Crie uma resposta educativa e informativa para nutrir este lead:\n\n1. Agrade√ßa o interesse\n2. Forne√ßa informa√ß√µes √∫teis\n3. Eduque sobre benef√≠cios\n4. Mantenha porta aberta\n\nContexto: {{user_message}}\nQualifica√ß√£o: {{qualification_result}}\n\nTom: Amig√°vel, educativo, sem press√£o de venda.\nFoco: Construir relacionamento e confian√ßa.",
        "timeout": 20000,
        "useBalancer": true
      }
    },
    {
      "id": "capture_contact_info",
      "type": "message",
      "position": { "x": 1100, "y": 50 },
      "data": {
        "label": "Capturar Contato",
        "message": "üéØ *Perfeito! Vou preparar algo especial para voc√™.*\n\nPara personalizar nossa proposta, preciso de algumas informa√ß√µes:\n\nüìß *E-mail corporativo*\nüè¢ *Nome da empresa*\nüë§ *Seu nome completo*\nüì± *Telefone (opcional)*\n\n*Pode me passar essas informa√ß√µes?*\n\nüí° *Dica: Com esses dados, posso criar uma proposta muito mais direcionada √†s suas necessidades!*"
      }
    },
    {
      "id": "extract_contact_data",
      "type": "llm",
      "position": { "x": 1300, "y": 50 },
      "data": {
        "label": "Extrair Dados",
        "prompt": "Extraia as informa√ß√µes de contato da mensagem do cliente:\n\nMensagem: {{user_message}}\n\nRetorne no formato JSON:\n{\n  \"email\": \"email encontrado ou null\",\n  \"company\": \"empresa encontrada ou null\",\n  \"name\": \"nome encontrado ou null\",\n  \"phone\": \"telefone encontrado ou null\"\n}\n\nSe n√£o encontrar alguma informa√ß√£o, use null.",
        "timeout": 15000,
        "useBalancer": true
      }
    },
    {
      "id": "save_to_crm",
      "type": "webhook",
      "position": { "x": 1500, "y": 50 },
      "data": {
        "label": "Salvar no CRM",
        "url": "{{CRM_WEBHOOK_URL}}/leads",
        "method": "POST",
        "payload": {
          "source": "whatsapp_bot",
          "contact_info": "{{extracted_contact}}",
          "qualification": "{{qualification_result}}",
          "conversation_id": "{{session_id}}",
          "timestamp": "{{current_time}}",
          "status": "new_lead",
          "priority": "high"
        }
      }
    },
    {
      "id": "schedule_demo",
      "type": "message",
      "position": { "x": 1100, "y": 200 },
      "data": {
        "label": "Agendar Demo",
        "message": "üöÄ *Que tal uma demonstra√ß√£o personalizada?*\n\nVou te mostrar exatamente como nossa solu√ß√£o pode resolver seus desafios.\n\nüìÖ *Hor√°rios dispon√≠veis:*\n\nüïò Segunda a Sexta: 9h √†s 18h\n‚è±Ô∏è Dura√ß√£o: 30-45 minutos\nüíª Online via Google Meet\n\n*Qual dia e hor√°rio seria melhor para voc√™?*\n\nExemplo: \"Quarta-feira √†s 14h\" ou \"Amanh√£ de manh√£\""
      }
    },
    {
      "id": "process_scheduling",
      "type": "llm",
      "position": { "x": 1300, "y": 200 },
      "data": {
        "label": "Processar Agendamento",
        "prompt": "O cliente quer agendar uma demo. Extraia e confirme:\n\nMensagem: {{user_message}}\n\nRetorne:\n1. Data preferida (se mencionada)\n2. Hor√°rio preferido (se mencionado)\n3. Sugest√£o de 3 hor√°rios pr√≥ximos\n\nFormato:\nDATA_PREFERIDA: [data ou 'n√£o especificada']\nHOR√ÅRIO_PREFERIDO: [hor√°rio ou 'n√£o especificado']\nSUGEST√ïES:\n- Op√ß√£o 1: [dia] √†s [hora]\n- Op√ß√£o 2: [dia] √†s [hora]\n- Op√ß√£o 3: [dia] √†s [hora]\n\nConsidere apenas dias √∫teis, hor√°rio comercial 9h-18h.",
        "timeout": 15000,
        "useBalancer": true
      }
    },
    {
      "id": "create_calendar_event",
      "type": "webhook",
      "position": { "x": 1500, "y": 200 },
      "data": {
        "label": "Criar Evento",
        "url": "{{CALENDAR_WEBHOOK_URL}}/events",
        "method": "POST",
        "payload": {
          "title": "Demonstra√ß√£o de Produto - {{contact_name}}",
          "description": "Demo personalizada para {{company_name}}",
          "datetime": "{{scheduled_time}}",
          "duration": 45,
          "attendees": ["{{contact_email}}", "vendas@empresa.com"],
          "meeting_link": "auto_generate"
        }
      }
    },
    {
      "id": "send_proposal",
      "type": "message",
      "position": { "x": 900, "y": 400 },
      "data": {
        "label": "Enviar Proposta",
        "message": "üìã *Proposta Personalizada*\n\nBaseado em nossa conversa, preparei uma proposta especial:\n\n‚úÖ *Benef√≠cios para seu neg√≥cio:*\n‚Ä¢ Redu√ß√£o de custos operacionais\n‚Ä¢ Aumento da produtividade\n‚Ä¢ Automa√ß√£o de processos\n‚Ä¢ ROI em at√© 90 dias\n\nüí∞ *Condi√ß√µes especiais hoje:*\n‚Ä¢ 30% de desconto na implementa√ß√£o\n‚Ä¢ 3 meses de suporte gratuito\n‚Ä¢ Migra√ß√£o sem custo adicional\n\nüìÑ *Pr√≥ximos passos:*\n1Ô∏è‚É£ Proposta detalhada por email\n2Ô∏è‚É£ Demonstra√ß√£o t√©cnica\n3Ô∏è‚É£ Proposta comercial final\n\n*Posso enviar a proposta completa agora?*"
      }
    },
    {
      "id": "follow_up_schedule",
      "type": "message",
      "position": { "x": 1100, "y": 400 },
      "data": {
        "label": "Agendar Follow-up",
        "message": "‚è∞ *Vou acompanhar seu processo de decis√£o*\n\nPara garantir que voc√™ tenha todo suporte necess√°rio:\n\nüìû *Follow-up programado:*\n‚Ä¢ Em 2 dias: Verificar d√∫vidas\n‚Ä¢ Em 1 semana: Status da decis√£o\n‚Ä¢ Em 2 semanas: Proposta revisada\n\nüîî *Notifica√ß√µes ativas*\n‚Ä¢ WhatsApp: Lembretes importantes\n‚Ä¢ Email: Materiais complementares\n‚Ä¢ Telefone: Contato direto quando necess√°rio\n\n*Alguma data espec√≠fica que devo evitar entrar em contato?*"
      }
    },
    {
      "id": "webhook_schedule_followup",
      "type": "webhook",
      "position": { "x": 1300, "y": 400 },
      "data": {
        "label": "Programar Follow-up",
        "url": "{{CRM_WEBHOOK_URL}}/followup",
        "method": "POST",
        "payload": {
          "lead_id": "{{contact_email}}",
          "follow_up_schedule": [
            {
              "date": "{{date_plus_2_days}}",
              "type": "whatsapp",
              "message_template": "followup_day2"
            },
            {
              "date": "{{date_plus_7_days}}",
              "type": "phone",
              "message_template": "followup_week1"
            },
            {
              "date": "{{date_plus_14_days}}",
              "type": "email",
              "message_template": "followup_week2"
            }
          ]
        }
      }
    },
    {
      "id": "closing_message",
      "type": "message",
      "position": { "x": 1500, "y": 400 },
      "data": {
        "label": "Mensagem de Fechamento",
        "message": "üéâ *Obrigado pela oportunidade!*\n\nEstou muito animado com a possibilidade de termos voc√™ como cliente.\n\nüì± *Seus pr√≥ximos passos:*\n‚úÖ Proposta detalhada no seu email\n‚úÖ Demonstra√ß√£o agendada\n‚úÖ Follow-up programado\n‚úÖ Contato direto dispon√≠vel\n\nüìû *Contato direto:*\nVendas: (11) 9999-9999\nEmail: vendas@empresa.com\n\nüí¨ *Continue nossa conversa:*\nDigite *proposta* para revisar detalhes\nDigite *demo* para reagendar\nDigite *!flow stop* para encerrar\n\n*Vamos fechar esse neg√≥cio! ü§ù*"
      }
    }
  ],
  "edges": [
    { "id": "e1", "source": "start-1", "target": "welcome_sales" },
    { "id": "e2", "source": "welcome_sales", "target": "qualify_lead" },
    { "id": "e3", "source": "qualify_lead", "target": "check_lead_quality" },
    { "id": "e4", "source": "check_lead_quality", "target": "high_priority_response", "label": "true" },
    { "id": "e5", "source": "check_lead_quality", "target": "standard_response", "label": "false" },
    { "id": "e6", "source": "high_priority_response", "target": "capture_contact_info" },
    { "id": "e7", "source": "capture_contact_info", "target": "extract_contact_data" },
    { "id": "e8", "source": "extract_contact_data", "target": "save_to_crm" },
    { "id": "e9", "source": "save_to_crm", "target": "schedule_demo" },
    { "id": "e10", "source": "standard_response", "target": "schedule_demo" },
    { "id": "e11", "source": "schedule_demo", "target": "process_scheduling" },
    { "id": "e12", "source": "process_scheduling", "target": "create_calendar_event" },
    { "id": "e13", "source": "create_calendar_event", "target": "send_proposal" },
    { "id": "e14", "source": "send_proposal", "target": "follow_up_schedule" },
    { "id": "e15", "source": "follow_up_schedule", "target": "webhook_schedule_followup" },
    { "id": "e16", "source": "webhook_schedule_followup", "target": "closing_message" }
  ],
  "configuration": {
    "webhooks": {
      "crm_integration": {
        "base_url": "https://api.yourcrm.com",
        "auth_header": "Authorization: Bearer {{CRM_API_KEY}}",
        "timeout": 10000
      },
      "calendar_system": {
        "base_url": "https://api.calendar.com",
        "auth_header": "X-API-Key: {{CALENDAR_API_KEY}}",
        "timeout": 5000
      }
    },
    "variables": {
      "CRM_WEBHOOK_URL": "https://api.yourcrm.com/v1",
      "CALENDAR_WEBHOOK_URL": "https://api.calendar.com/v1",
      "CRM_API_KEY": "your-crm-api-key",
      "CALENDAR_API_KEY": "your-calendar-api-key"
    },
    "settings": {
      "lead_scoring_enabled": true,
      "auto_followup_enabled": true,
      "demo_duration_minutes": 45,
      "max_followup_attempts": 3,
      "high_priority_threshold": ["Alto", "Imediata"]
    }
  }
}